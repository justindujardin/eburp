
/*!
  pow2 - v0.1.1
  built: 2015-04-26
 */

var pow2;!function(a){var b;!function(a){a.app=angular.module("pow2",["ngAnimate"])}(b=a.ui||(a.ui={}))}(pow2||(pow2={}));var pow2;!function(a){var b;!function(b){var c;!function(c){var d=function(){function b(c,d){this.$compile=c,this.$scope=d,this._canvasAcquired=!1,this.renderer=new a.SpriteRender,this.world=new a.World,this.renderer=new a.SpriteRender,this.world=a.getWorld(b.WORLD_NAME),this.world||(this.world=new a.World,a.registerWorld(b.WORLD_NAME,this.world)),this.world.mark(this.renderer),this._renderCanvas=this.$compile('<canvas style="position:absolute;left:-9000px;top:-9000px;" width="64" height="64"></canvas>')(d)[0]}return b.prototype.getRenderContext=function(a,b){if(this._canvasAcquired)throw new Error("Only one rendering canvas is available at a time.  Check for calls to this function without corresponding releaseCanvas() calls.");this._canvasAcquired=!0,this._renderCanvas.width=a,this._renderCanvas.height=b;var c=this._renderCanvas.getContext("2d");return c.webkitImageSmoothingEnabled=!1,c.mozImageSmoothingEnabled=!1,c},b.prototype.releaseRenderContext=function(){return this._canvasAcquired=!1,this._renderCanvas.toDataURL()},b.WORLD_NAME="icon-render-world",b.$inject=["$compile","$scope"],b}();c.IconRenderController=d,b.app.directive("iconRender",["$compile",function(a){return{restrict:"A",controller:d,link:function(b,c,d,e){var f=parseInt(d.width||"64"),g=parseInt(d.height||"64"),h=a('<img src="" width="'+f+'"/>')(b);c.append(h),b.$watch(d.icon,function(a){return a?void e.renderer.getSingleSprite(a,d.frame||0,function(a){var c=e.getRenderContext(f,g);c.clearRect(0,0,f,g),c.drawImage(a,0,0,f,g);var d=e.releaseRenderContext();b.$apply(function(){h[0].src=d})}):void(h[0].src="/images/a/blank.gif")})}}}])}(c=b.directives||(b.directives={}))}(b=a.ui||(a.ui={}))}(pow2||(pow2={}));var pow2;!function(a){var b;!function(a){var b;!function(b){var c=function(){function a(a,b,c){this.$compile=a,this.$rootScope=b,this.$animate=c}return a.prototype.applyDamage=function(a,b,c,d){var e=this,f=a.point.clone();f.y-=c.camera.point.y+1.25,f.x-=c.camera.point.x;var g=c.worldToScreen(f,c.cameraScale);g.add(c.$el[0].offsetLeft,c.$el[0].offsetTop);var h=this.$compile(['<span class="damage-value',0===b?" miss":"",0>b?" heal":"",'" style="position:absolute;left:'+g.x+"px;top:"+g.y+'px;">',Math.abs(b),"</span>"].join(""))(this.$rootScope);this.$rootScope.$apply(function(){e.$animate.enter(h,c.$el.parent()).then(function(){h.remove(),d&&d()})})},a}();b.DamageValueService=c,a.app.factory("$damageValue",["$compile","$rootScope","$animate",function(a,b,d){return new c(a,b,d)}])}(b=a.services||(a.services={}))}(b=a.ui||(a.ui={}))}(pow2||(pow2={}));
//# sourceMappingURL=pow2.min.ui.map